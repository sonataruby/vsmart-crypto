SmartApps=function(o,s){"use strict";var t,c;let i=o.Blockchain;var n,u=i.address();return o.tokenGame1={},o.tokenGame1.getTest=async e=>{var a=await t.LeverHistory("0x4bcf94e14907989227d683f8d3efce3a82ae5402",2).call();console.log(a)},o.tokenGame1.getBalt=async e=>{var r=[];return await t.getTokenOwner(n).call().then(async a=>{for(var t=0;t<a.length;t++)await axios.get("https://api.starsbattle.co/layer/"+a[t]).then(e=>{e=e.data,e={tokenId:a[t],name:e.name,Class:e.Class,Lever:e.Lever,Bullet:e.Bullet,BulletClass:e.BulletClass,Speed:e.Speed,Score:e.Score,Groups:e.Groups,Confirm:e.Confirm};r.push(e)})}),0==r.length&&null==e&&(s.location.href="/app/marketplace"),r},o.tokenGame1.getPlayer=async e=>{var a={};return await axios.get("https://api.starsbattle.co/layer/"+e).then(e=>{a=e.data}),a},o.tokenGame1.upLever=async e=>{let a=!1;return await t.upLeverStart(e).send({gas:3e5,data:n}).then(e=>{e.transactionHash&&(a=!0)}),a},o.tokenGame1.getMarketPlate=async e=>{var r=[];return await c.getMarketStars(e+1).call().then(e=>{for(var a,t=0;t<e.length;t++)0<t&&(a={id:t,name:""!=e[t].name?e[t].name:"Stars CX 1",price:0<e[t].price?i.fromWei(e[t].price):1e3,lever:0<e[t].lever?e[t].lever:1,class:0<e[t].class?e[t].class:1,bullet:0<e[t].bullet?e[t].bullet:1e3,bulletclass:0<e[t].bulletclass?e[t].bulletclass:1,speed:0<e[t].speed?e[t].speed:7},r.push(a))}),r},o.tokenGame1.keccak256=e=>i.keccak256(e),o.tokenGame1.buyMarketPlate=async e=>{var a=(await c.MarketPlaceItemOf(e).call()).price;if(0==a)return i.notify("Item not avalible"),!1;await o.tokenSmart.allowance(u.AddressContractNFTFactory)<a&&await o.tokenSmart.approve(u.AddressContractNFTFactory,a),await c.buyStars(e).send({gas:5e5}).then(e=>{console.log(e)})},o.tokenGame1.getBulletMarket=async e=>{var r=[];return await c.getBulletMarket(e).call().then(e=>{for(var a=0;a<e.length;a++){var t={id:a+1,name:e[a].name,price:i.fromWei(e[a].price),bullet:e[a].bullet};r.push(t)}}),r},o.tokenGame1.buyBullet=async(a,e,t,r)=>{var n=(await c.MarketPlaceBulletOf(e).call()).price;if(0==n)return i.notify("Item not avalible"),!1;if(Number(a)<0)return i.notify("Token not avalible"),!1;t=Number(t)<0?0:t;var l=0;if(1==await o.tokenSmart.approve(u.AddressContractNFTFactory,n))try{await c.buyBullet(a,e,t).send({gas:3e5}).then(async e=>{i.notify("Item Update"),1==r?l=1:await o.Blockchain.Socket().emit("buybulet",{tokenId:a},function(e){s.location.href="/app/my"})})}catch(e){return}return l},o.tokenGame1.buyVip=async(a,e)=>{var t=(await c.VipOf(e).call()).price;if(0==t)return i.notify("Item not avalible"),!1;1==await o.tokenSmart.approve(u.AddressContractNFTFactory,t)&&await c.buyVip(a,e).send({gas:3e5}).then(async e=>{i.notify("VIP Update"),await o.Blockchain.Socket().emit("buyvip",{tokenId:a},function(e){s.location.href="/app/my"})})},o.tokenGame1.Init=async()=>{await i.init(),t=await i.loadContractGame1(),c=await i.loadContractNFTFactory(),n=await i.getLoginWallet()},o.components.docReady.push(o.tokenGame1.Init),o}(SmartApps,(jQuery,window));