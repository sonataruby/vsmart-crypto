SmartApps=function(o,i){"use strict";var t,c;let s=o.Blockchain;var r,u=s.address(),p=0;return o.tokenGame1={},o.tokenGame1.getTest=async e=>{var a=await t.LeverHistory("0x4bcf94e14907989227d683f8d3efce3a82ae5402",2).call();console.log(a)},o.tokenGame1.getBalt=async e=>{var n=[];return await t.getTokenOwner(r).call().then(async a=>{for(var t=0;t<a.length;t++)await axios.get("https://api.starsbattle.co/layer/"+a[t]).then(e=>{e=e.data,e={tokenId:a[t],name:e.name,Class:e.Class,Lever:e.Lever,Bullet:e.Bullet,BulletClass:e.BulletClass,Speed:e.Speed,Score:e.Score,Groups:e.Groups,Confirm:e.Confirm};n.push(e)})}),0==n.length&&null==e&&(i.location.href="/app/marketplace"),n},o.tokenGame1.getPlayer=async e=>{var a={};return await axios.get("https://api.starsbattle.co/layer/"+e).then(e=>{a=e.data}),a},o.tokenGame1.upLever=async e=>{let a=!1;return await t.upLeverStart(e).send({gas:3e5,data:r}).then(e=>{e.transactionHash&&(a=!0)}),a},o.tokenGame1.getMarketPlate=async e=>{var n=[];return await c.getMarketStars(e+1).call().then(e=>{for(var a,t=0;t<e.length;t++)0<t&&(a={id:t,name:""!=e[t].name?e[t].name:"Stars CX 1",price:0<e[t].price?s.fromWei(e[t].price):1e3,lever:0<e[t].lever?e[t].lever:1,class:0<e[t].class?e[t].class:1,bullet:0<e[t].bullet?e[t].bullet:1e3,bulletclass:0<e[t].bulletclass?e[t].bulletclass:1,speed:0<e[t].speed?e[t].speed:7},n.push(a))}),n},o.tokenGame1.keccak256=e=>s.keccak256(e),o.tokenGame1.buyMarketPlate=async e=>{var a=(await c.MarketPlaceItemOf(e).call()).price;return 0==a?(s.notify("Item not avalible"),!1):s.toWei(p.toString())<a?(s.notify("Balance empty. You can not buy"),!1):void(1==await o.tokenSmart.approve(u.AddressContractNFTFactory,a)&&await c.buyStars(e).send({gas:5e5}).then(e=>{console.log(e)}))},o.tokenGame1.getBulletMarket=async e=>{var n=[];return await c.getBulletMarket(e).call().then(e=>{for(var a=0;a<e.length;a++){var t={id:a+1,name:e[a].name,price:s.fromWei(e[a].price),bullet:e[a].bullet};n.push(t)}}),n},o.tokenGame1.buyBullet=async(a,e,t,n)=>{var r=(await c.MarketPlaceBulletOf(e).call()).price;if(0==r)return s.notify("Item not avalible"),!1;if(Number(a)<0)return s.notify("Token not avalible"),!1;if(s.toWei(p.toString())<r)return s.notify("Balance empty. You can not buy"),!1;t=Number(t)<0?0:t;var l=0;if(1==await o.tokenSmart.approve(u.AddressContractNFTFactory,r))try{await c.buyBullet(a,e,t).send({gas:3e5}).then(async e=>{s.notify("Item Update"),1==n?l=1:await o.Blockchain.Socket().emit("buybulet",{tokenId:a},function(e){i.location.href="/app/my"})})}catch(e){return}return l},o.tokenGame1.buyVip=async(a,e)=>{var t=(await c.VipOf(e).call()).price;return 0==t?(s.notify("Item not avalible"),!1):s.toWei(p.toString())<t?(s.notify("Balance empty. You can not buy"),!1):void(1==await o.tokenSmart.approve(u.AddressContractNFTFactory,t)&&await c.buyVip(a,e).send({gas:3e5}).then(async e=>{s.notify("VIP Update"),await o.Blockchain.Socket().emit("buyvip",{tokenId:a},function(e){i.location.href="/app/my"})}))},o.tokenGame1.Init=async()=>{await s.init(),t=await s.loadContractGame1(),c=await s.loadContractNFTFactory(),r=await s.getLoginWallet(),await o.tokenSmart.loadContracts(),p=await o.tokenSmart.balance()},o.components.docReady.push(o.tokenGame1.Init),o}(SmartApps,(jQuery,window));