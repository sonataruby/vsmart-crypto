SmartApps=function(o,s){"use strict";var n,c;let i=o.Blockchain;var l,u=i.address();return o.tokenGame1={},o.tokenGame1.getTest=async a=>{var e=await n.LeverHistory("0x4bcf94e14907989227d683f8d3efce3a82ae5402",2).call();console.log(e)},o.tokenGame1.getBalt=async a=>{var r=[];return await n.getTokenOwner(l).call().then(async e=>{for(var t=0;t<e.length;t++)await axios.get("https://api.starsbattle.co/layer/"+e[t]).then(a=>{a=a.data,a={tokenId:e[t],name:a.name,Class:a.Class,Lever:a.Lever,Bullet:a.Bullet,BulletClass:a.BulletClass,Speed:a.Speed,Score:a.Score,Groups:a.Groups};r.push(a)})}),0==r.length&&null==a&&(s.location.href="/app/marketplace"),r},o.tokenGame1.getPlayer=async a=>{var e={};return await axios.get("https://api.starsbattle.co/layer/"+a).then(a=>{e=a.data}),e},o.tokenGame1.upLever=async(a,e,t)=>{let r=0;return await axios.post("https://api.starsbattle.co/uplever",{tokenid:a,score:e,bullet:t,wallet:l}).then(async a=>{"update"==a.data.status&&(a=a.data.hash,await n.upLeverStart(a).send({gas:3e5,data:l}).then(a=>{a.transactionHash&&(r=1)}))}),r},o.tokenGame1.getMarketPlate=async a=>{var r=[];return await c.getMarketStars(a+1).call().then(a=>{for(var e,t=0;t<a.length;t++)0<t&&(e={id:t,name:""!=a[t].name?a[t].name:"Stars CX 1",price:0<a[t].price?i.fromWei(a[t].price):1e3,lever:0<a[t].lever?a[t].lever:1,class:0<a[t].class?a[t].class:1,bullet:0<a[t].bullet?a[t].bullet:1e3,bulletclass:0<a[t].bulletclass?a[t].bulletclass:1,speed:0<a[t].speed?a[t].speed:7},r.push(e))}),r},o.tokenGame1.keccak256=a=>i.keccak256(a),o.tokenGame1.buyMarketPlate=async a=>{var e=(await c.MarketPlaceItemOf(a).call()).price;if(0==e)return i.notify("Item not avalible"),!1;await o.tokenSmart.allowance(u.AddressContractNFTFactory)<e&&await o.tokenSmart.approve(u.AddressContractNFTFactory,e),await c.buyStars(a).send({gas:5e5}).then(a=>{console.log(a)})},o.tokenGame1.getBulletMarket=async a=>{var r=[];return await c.getBulletMarket(a).call().then(a=>{for(var e=0;e<a.length;e++){var t={id:e+1,name:a[e].name,price:i.fromWei(a[e].price),bullet:a[e].bullet};r.push(t)}}),r},o.tokenGame1.buyBullet=async(e,a,t,r)=>{var n=(await c.MarketPlaceBulletOf(a).call()).price;if(0==n)return i.notify("Item not avalible"),!1;if(Number(e)<0)return i.notify("Token not avalible"),!1;t=Number(t)<0?0:t;var l=0;if(1==await o.tokenSmart.approve(u.AddressContractNFTFactory,n))try{await c.buyBullet(e,a,t).send({gas:3e5}).then(async a=>{i.notify("Item Update"),1==r?l=1:await o.Blockchain.Socket().emit("buybulet",{tokenId:e},function(a){s.location.href="/app/my"})})}catch(a){return}return l},o.tokenGame1.buyVip=async(e,a)=>{var t=(await c.VipOf(a).call()).price;if(0==t)return i.notify("Item not avalible"),!1;1==await o.tokenSmart.approve(u.AddressContractNFTFactory,t)&&await c.buyVip(e,a).send({gas:3e5}).then(async a=>{i.notify("VIP Update"),await o.Blockchain.Socket().emit("buyvip",{tokenId:e},function(a){s.location.href="/app/my"})})},o.tokenGame1.Init=async()=>{await i.init(),n=await i.loadContractGame1(),c=await i.loadContractNFTFactory(),l=await i.getLoginWallet()},o.components.docReady.push(o.tokenGame1.Init),o}(SmartApps,(jQuery,window));